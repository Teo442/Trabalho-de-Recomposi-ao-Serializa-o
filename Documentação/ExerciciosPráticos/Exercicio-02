import java.io.*;
import java.util.ArrayList;
import java.util.List;

class GerenciadorDeClientes {
    private List<Cliente> clientes;

    public GerenciadorDeClientes() {
        this.clientes = new ArrayList<>();
    }

    public void adicionarCliente(Cliente cliente) {
        this.clientes.add(cliente);
    }

    public void salvarClientes(String nomeArquivo) {
        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(nomeArquivo))) {
            oos.writeObject(clientes);
            System.out.println("Lista de clientes serializada com sucesso.");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void carregarClientes(String nomeArquivo) {
        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream(nomeArquivo))) {
            clientes = (List<Cliente>) ois.readObject();
            System.out.println("Lista de clientes desserializada com sucesso.");
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }

    public List<Cliente> filtrarClientesPorSexo(char sexo) {
        List<Cliente> clientesFiltrados = new ArrayList<>();
        for (Cliente cliente : clientes) {
            if (cliente.getSexo() == sexo) {
                clientesFiltrados.add(cliente);
            }
        }
        return clientesFiltrados;
    }

    public static void main(String[] args) {
        GerenciadorDeClientes gerenciador = new GerenciadorDeClientes();

        // Adicionando clientes
        Cliente cliente1 = new Cliente("Jo√£o Silva", 'M', "123.456.789-00");
        Cliente cliente2 = new Cliente("Maria Oliveira", 'F', "987.654.321-00");
        Cliente cliente3 = new Cliente("Carlos Souza", 'M', "111.222.333-44");
        
        gerenciador.adicionarCliente(cliente1);
        gerenciador.adicionarCliente(cliente2);
        gerenciador.adicionarCliente(cliente3);

        // Salvando clientes em um arquivo
        gerenciador.salvarClientes("clientes.ser");

        // Carregando clientes do arquivo
        gerenciador.carregarClientes("clientes.ser");

        // Filtrando clientes por sexo masculino
        List<Cliente> clientesMasculinos = gerenciador.filtrarClientesPorSexo('M');
        System.out.println("Clientes masculinos:");
        for (Cliente cliente : clientesMasculinos) {
            System.out.println(cliente);
        }
    }
}
